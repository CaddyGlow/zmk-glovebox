# Example Glovebox User Configuration
# 
# This file shows all available configuration options for Glovebox.
# Save this file as one of:
# - ~/.config/glovebox/config.yml (recommended)
# - ~/.config/glovebox/config.yaml
# - ./glovebox.yml (project-specific)
# - ./glovebox.yaml (project-specific)

# Default profile (keyboard/firmware combination) to use when not specified  
profile: "glove80/v25.05"

# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
log_level: "INFO"

# Additional paths to search for keyboard configurations
# Supports environment variable expansion (e.g., $HOME, ${USER})
keyboard_paths:
  - "~/my-keyboards"
  - "/path/to/custom/keyboards"

# Firmware-related settings
firmware:
  # Flash behavior settings
  flash:
    # Timeout in seconds for flash operations (default: 60)
    timeout: 60
    
    # Number of devices to flash (0 for infinite, default: 2)
    count: 2
    
    # Enable device tracking during flash operations (default: true)
    track_flashed: true
    
    # Skip devices already present at startup (default: false)
    # When false, flash existing matching devices immediately
    # When true, only wait for newly plugged devices
    skip_existing: false
    
    # Wait mode settings (NEW)
    # Enable real-time device waiting with USB monitoring
    wait: false
    
    # Polling interval in seconds when waiting for devices (0.1-5.0, default: 0.5)
    poll_interval: 0.5
    
    # Show real-time device detection progress updates (default: true)
    show_progress: true
  
  # Compile behavior settings
  compile:
    # Default docker image for generic docker compiler (if not specified in keyboard config)
    default_image: "zmkfirmware/zmk-build-arm:stable"
    
    # Default build strategy: "west", "cmake", "make", "ninja", "custom"
    default_build_strategy: "west"
    
    # Enable workspace caching to speed up builds (default: true)
    cache_workspace: true
    
    # Default west workspace configuration for ZMK builds
    west_workspace:
      manifest_url: "https://github.com/zmkfirmware/zmk.git"
      manifest_revision: "main"
      modules: []
      west_commands: 
        - "west init -l config"
        - "west update"
      workspace_path: "/zmk-workspace"
      config_path: "config"

# Backward compatibility: Deprecated flash setting (use firmware.flash.skip_existing instead)
flash_skip_existing: false

# Configuration precedence (highest to lowest):
# 1. Environment variables (using Pydantic Settings with double underscore for nesting):
#    - GLOVEBOX_PROFILE="glove80/v25.05"
#    - GLOVEBOX_FIRMWARE__FLASH__TIMEOUT=120
#    - GLOVEBOX_FIRMWARE__FLASH__COUNT=5
#    - GLOVEBOX_FIRMWARE__FLASH__TRACK_FLASHED=false
#    - GLOVEBOX_FIRMWARE__FLASH__SKIP_EXISTING=true
#    - GLOVEBOX_FIRMWARE__FLASH__WAIT=true (NEW)
#    - GLOVEBOX_FIRMWARE__FLASH__POLL_INTERVAL=1.0 (NEW)
#    - GLOVEBOX_FIRMWARE__FLASH__SHOW_PROGRESS=false (NEW)
#    - GLOVEBOX_FIRMWARE__COMPILE__DEFAULT_IMAGE="zmkfirmware/zmk-build-arm:stable"
#    - GLOVEBOX_FIRMWARE__COMPILE__DEFAULT_BUILD_STRATEGY="west"
#    - GLOVEBOX_FIRMWARE__COMPILE__CACHE_WORKSPACE=true
#    - GLOVEBOX_FLASH_SKIP_EXISTING=true (deprecated)
# 2. Command-line flags (--profile, --timeout, --count, --no-track, --skip-existing, --wait, --poll-interval, --show-progress)
# 3. This configuration file
# 4. Built-in defaults